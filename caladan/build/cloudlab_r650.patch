diff --git a/iokernel/dpdk.c b/iokernel/dpdk.c
index c7226f7..88b7346 100644
--- a/iokernel/dpdk.c
+++ b/iokernel/dpdk.c
@@ -246,7 +246,7 @@ int dpdk_init(void)
 int dpdk_late_init(void)
 {
 	/* initialize port */
-	dp.port = 0;
+	dp.port = 2;
 	if (dpdk_port_init(dp.port, dp.rx_mbuf_pool) != 0) {
 		log_err("dpdk: cannot init port %"PRIu8 "\n", dp.port);
 		return -1;
diff --git a/iokernel/ias_bw.c b/iokernel/ias_bw.c
index 56d09fb..e563465 100644
--- a/iokernel/ias_bw.c
+++ b/iokernel/ias_bw.c
@@ -10,7 +10,7 @@
 #include "ksched.h"
 #include "pmc.h"
 #include "ias.h"
-#include "pcm.h"
+/* #include "pcm.h" */
 
 /* statistics */
 uint64_t ias_bw_punish_count;
@@ -185,7 +185,8 @@ static float ias_measure_bw(void)
 	barrier();
 	tsc = rdtsc();
 	barrier();
-	cur_cas = pcm_caladan_get_cas_count(0);
+	/* cur_cas = pcm_caladan_get_cas_count(0); */
+	cur_cas = 0;
 	bw_estimate = (float)(cur_cas - last_cas) / (float)(tsc - last_tsc);
 	last_cas = cur_cas;
 	last_tsc = tsc;
@@ -257,14 +258,16 @@ int ias_bw_init(void)
 	if (cfg.nobw)
 		return 0;
 
-	ret = pcm_caladan_init(0);
+	/* ret = pcm_caladan_init(0); */
+	ret = 0;
 	if (ret)
 		return ret;
 
 	/* We monitor 1 channel, so multiply measurements by nr_channels to estimate real bw */
-	nr_channels = pcm_caladan_get_active_channel_count();
-	if (nr_channels == 0)
-		return -EINVAL;
+	/* nr_channels = pcm_caladan_get_active_channel_count(); */
+	/* if (nr_channels == 0) */
+	/* 	return -EINVAL; */
+	nr_channels = 0;
 
 	/* Use default limit if none supplied */
 	if (!cfg.ias_bw_limit)
diff --git a/iokernel/sched.c b/iokernel/sched.c
index 6846dc1..c19ba79 100644
--- a/iokernel/sched.c
+++ b/iokernel/sched.c
@@ -671,7 +671,7 @@ int sched_init(void)
 	 */
 
 	for (i = 0; i < cpu_count; i++) {
-		if (cpu_info_tbl[i].package != 0 && sched_ops != &numa_ops)
+		if (cpu_info_tbl[i].package != 1 && sched_ops != &numa_ops)
 			continue;
 
 		if (allowed_cores_supplied &&
diff --git a/runtime/net/directpath/mlx5/mlx5_init.c b/runtime/net/directpath/mlx5/mlx5_init.c
index 0071d92..e626a3d 100644
--- a/runtime/net/directpath/mlx5/mlx5_init.c
+++ b/runtime/net/directpath/mlx5/mlx5_init.c
@@ -385,7 +385,7 @@ int mlx5_init(struct hardware_q **rxq_out, struct direct_txq **txq_out,
 	}
 
 	for (i = 0; dev_list[i]; i++) {
-		if (strncmp(ibv_get_device_name(dev_list[i]), "mlx5", 4))
+		if (strncmp(ibv_get_device_name(dev_list[i]), "mlx5_2", 6))
 			continue;
 
 		if (!cfg_pci_addr_specified)
diff --git a/runtime/net/directpath/common.c b/runtime/net/directpath/common.c
index deb009c..13947b5 100644
--- a/runtime/net/directpath/common.c
+++ b/runtime/net/directpath/common.c
@@ -44,6 +46,6 @@ REGISTER_CFG(directpath_pci_handler);
 size_t directpath_rx_buf_pool_sz(unsigned int nrqs)
 {
 	size_t buflen = MBUF_DEFAULT_LEN;
-	buflen *= MAX(8, guaranteedks) * (16 * RQ_NUM_DESC) * 2UL;
+	buflen *= MAX(8, guaranteedks) * (16 * RQ_NUM_DESC) * 6UL;
 	return align_up(buflen, PGSIZE_2MB);
 }

diff --git a/scripts/setup_machine.sh b/scripts/setup_machine.sh
index 8e3bbcd..33c5827 100755
--- a/scripts/setup_machine.sh
+++ b/scripts/setup_machine.sh
@@ -16,8 +16,8 @@ mknod /dev/ksched c 280 0
 chmod uga+rwx /dev/ksched

 # reserve huge pages
-echo 5192 > /sys/devices/system/node/node0/hugepages/hugepages-2048kB/nr_hugepages
-echo 0 > /sys/devices/system/node/node1/hugepages/hugepages-2048kB/nr_hugepages
+echo 1024 > /sys/devices/system/node/node0/hugepages/hugepages-2048kB/nr_hugepages
+echo 5192 > /sys/devices/system/node/node1/hugepages/hugepages-2048kB/nr_hugepages
 for n in /sys/devices/system/node/node[2-9]; do
        echo 0 > $n/hugepages/hugepages-2048kB/nr_hugepages
 done
